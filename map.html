<!doctype html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <title>Mapworks What 3 Words Example</title>
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
   <link rel="stylesheet" href="https://api.mapworks.io/studio/latest/css/studio-core.css">

   <script src="https://api.mapworks.io/studio/latest/js/studio-core.js" type="text/javascript"></script>
   
   <!--BOOTSTRAP-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	
	
   <script src="what3words.js" type="text/javascript"></script>
</head>
<body>
   <style type="text/css">
      body,
      html {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      
      #mapworks-map {
        width: 100%;
        height: 100%;
      }
      
      #what-3-words {
        max-width: 700px;
		min-width: 700px;
        height: auto;
        position: absolute;
      }
      
      #w3w-navbar {
        background: transparent;
        border: none;
        box-shadow: none;
      }
      
      .w3w-logo {
        width: auto;
        height: 30px;
        max-width: 100px;
        max-height: 88px;
      }
      
      #txtWhat3Words {
        width: 250px;
      }
      
      .w3w-background {
		  background-color: #e6323e;
		  padding-top: 0;
		  padding-bottom: 0;
      }
	.gly-spin {
		-webkit-animation: spin 2s infinite linear;
		-moz-animation: spin 2s infinite linear;
		-o-animation: spin 2s infinite linear;
		animation: spin 2s infinite linear;
	}
	@-webkit-keyframes spin {
		0% {
			-webkit-transform: rotate(0deg);
			transform: rotate(0deg);
		}
		100% {
			-webkit-transform: rotate(359deg);
			transform: rotate(359deg);
		}
	}
	@keyframes spin {
		0% {
			-webkit-transform: rotate(0deg);
			transform: rotate(0deg);
		}
		100% {
			-webkit-transform: rotate(359deg);
			transform: rotate(359deg);
		}
	}
   </style>
   <div id="what-3-words">
		<nav class="navbar navbar-default navbar-static-top" id="w3w-navbar">
			<form class="navbar-form navbar-left" role="search">
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon w3w-background" id="basic-addon1">
							<img src="https://what3words.com/wp-content/uploads/2015/12/w3w_logo_final-white.png" alt="what3words" class="w3w-logo">
						</span>
						<input type="text" class="form-control w3w" id="txtWhat3Words" placeholder="What 3 Words">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" id="btnGo">Go!</button>
						</span>
					</div>
				</div>
				<button class="btn btn-default" type="button" id="btnSurround">Show Surrounding Words</button>
				<span id='spinner' style='display:none' class="glyphicon glyphicon-refresh gly-spin"></span>
			</form>
		</nav>
	</div>
   <div id="mapworks-map"></div>
  <script type="text/javascript">
	var map = new Studio.core.Map("#mapworks-map", {
	  // Your API key.
	  apiKey: "AStBVlM5TGU4ZU5USldqckxLT0RZZi8yMjk1MnRNRVQtbWRXMUJTSmk1dVBRQ8Hs8gqDcuLKaXX/99HEcW450ZLI4ZcgnIoAo50WVo/reJqlsQ",

	  // The map identifier of the map that was added to the API key.
	  map: "AVIz8S6INkycPmrP2gM1",

	  // Enable or disable the Navigation Control UI.
	  navigationControl: true,

	  // Enable or disable the Scale Control UI.
	  scaleControl: true,

	  // Enable or disable the Tooltip Control.
	  tooltipControl: false,

	  // Enable or disable the Zoom Control UI.
	  zoomControl: false
	}).load(function() { // Load the map
		});


	// Call when the map has finished
	map.once('ready', function() {
		$ = Studio.$; //JQuery
		_ = Studio._; //Underscore

		//Initialise
		w3w.init();

		// check if there is a 'w3w' parameter in the URL
		var urlParam = getParameterByName('w3w');
		if(urlParam != null){
			$('#txtWhat3Words')[0].value = urlParam;
			$("#btnGo").click();
		}
	});
   </script>
</body>
</html>
